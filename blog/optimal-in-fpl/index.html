<!doctype html><html lang=en-us><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131142568-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-131142568-1")</script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js></script><meta charset=utf-8><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta name=viewport content="width=device-width,initial-scale=1"><title>On the meaning of optimal in FPL - AlpsCode</title><meta name=author content="Sertalp B. Cay"><meta name=keywords content="analytics,programming,optimization,FPL,math"><meta name=description content><meta name=generator content="Hugo 0.147.8"><link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel=stylesheet type=text/css><link rel=stylesheet href=//use.fontawesome.com/releases/v5.11.2/css/all.css><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link href=/css/animate.css rel=stylesheet><link href=/css/style.default.css rel=stylesheet id=theme-stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link href=/css/owl.carousel.css rel=stylesheet><link href=/css/owl.theme.css rel=stylesheet><link rel=alternate href=https://alpscode.com/index.xml type=application/rss+xml title=AlpsCode><meta property="og:locale" content="en_us"><meta property="og:site_name" content="AlpsCode"><meta property="og:title" content="On the meaning of optimal in FPL"><meta property="og:type" content="article"><meta property="og:url" content="https://alpscode.com/blog/optimal-in-fpl/"><meta property="og:description" content><meta property="og:image" content="https://alpscode.com/img/banners/optimization_arrow.jpg"><meta property="og:image:type" content="image/jpg"><meta property="og:image:width" content="640"><meta property="og:image:height" content="426"><meta property="og:updated_time" content="2021-01-08T11:00:00-0400"><meta property="article:section" content="optimization"><meta property="article:tag" content="FPL"><meta property="article:tag" content="optimization"><meta property="article:tag" content="analytics"><meta property="article:tag" content="math"><meta property="article:published_time" content="2021-01-08T11:00:00-0400"><meta property="article:modified_time" content="2021-01-08T11:00:00-0400"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="On the meaning of optimal in FPL"><meta name=twitter:image content="https://alpscode.com/img/banners/optimization_arrow.jpg"><meta name=twitter:description content><script type=text/javascript>var _paq=_paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){t="//alpscode.com/piwik/",_paq.push(["setTrackerUrl",t+"piwik.php"]),_paq.push(["setSiteId","1"]);var t,n=document,e=n.createElement("script"),s=n.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.defer=!0,e.src=t+"piwik.js",s.parentNode.insertBefore(e,s)}()</script><script src=https://cdn.jsdelivr.net/npm/vanilla-lazyload@10.19.0/dist/lazyload.min.js></script><link href=/css/syntax.css rel=stylesheet><link href=/css/custom.css rel=stylesheet><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script></head><body><div id=all><header><header class=navbar-affixed-top data-spy=affix data-offset-top=62><div class="navbar navbar-default yamm" role=navigation id=navbar><div class=container><div class=navbar-header><a class="navbar-brand home" href=/><img src=/img/logo.svg alt="On the meaning of optimal in FPL logo" class="hidden-xs hidden-sm">
<img src=/img/logo.svg alt="On the meaning of optimal in FPL logo" class="visible-xs visible-sm">
<span class=sr-only>On the meaning of optimal in FPL - go to homepage</span></a><div class=navbar-buttons><button type=button class="navbar-toggle btn-template-main" data-toggle=collapse data-target=#navigation>
<span class=sr-only>Toggle Navigation</span>
<i class="fas fa-align-justify"></i></button></div></div><div class="navbar-collapse collapse" id=navigation><ul class="nav navbar-nav navbar-right"><li class="dropdown active"><a href=/blog/>Blog</a></li><li class=dropdown><a href=/about>About</a></li></ul></div><div class="collapse clearfix" id=search><form class=navbar-form role=search><div class=input-group><input type=text class=form-control placeholder=Search>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div></div></header></header><div id=heading-breadcrumbs><div class=container><div class=row><div class=col-md-12><h1>On the meaning of optimal in FPL</h1></div></div></div></div><div id=content><div class=container><div class=row><div class=col-md-9 id=blog-post><p class="text-muted mb-small text-right">By <a href=/about>Sertalp B. Cay</a> | January 8, 2021</p><div class=post-header-img style=background-image:url(https://alpscode.com//img/banners/optimization_arrow.jpg)><div class=post-header-img-inner></div></div><div id=post-content><p>The amount of available content for Fantasy Premier League (FPL) is unbelivable and hard to follow.
Among all, one of my favorite resources is the &ldquo;<a href=https://twitter.com/uncertainty_pod target=_blank>Corridor of Uncertainty</a>&rdquo; podcast as they focus on modeling and analytics part of FPL.
Their guest in the latest episode was Abdul Rehman (<a href=https://twitter.com/FPL_Salah target=_blank>FPL Salah</a>), who is a well-known manager in the FPL community.
I truly enjoyed their discussion and noticed that the word &ldquo;optimal&rdquo; is thrown around quite a bit.
Since I do optimization for a living, it makes me happy to hear it in everyday conversations, especially regarding FPL.</p><p>FPL is the picture-perfect example for demonstrating how optimization could be useful.
Why? Because (mathematical) optimization deals with making the best out of limited resources under restrictions.
Fantasy sports &ndash;with their well-defined rules, and standard ways of measuring the performance&ndash; are great showcases.</p><p>As I have mentioned before, so-called &ldquo;Effective Ownership&rdquo; (EO) is a controversial topic among FPL managers.</p><blockquote class=twitter-tweet><p lang=en dir=ltr>This is where Effective Ownership comes into play. If you’re playing for a personal points tally it’s all good, if you’re playing for points relative to other managers eg rank,then EO and differentials come into play. That’s why EO is a “thing”.</p>&mdash; FFScout_Mark (@FFScout_Mark) <a href="https://twitter.com/FFScout_Mark/status/1341805255646998529?ref_src=twsrc%5Etfw">December 23, 2020</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><blockquote class=twitter-tweet><p lang=en dir=ltr>This is something I’m incredibly passionate about.<br>There is no “advantage / disadvantage” that can be made on the TC when you base it on others.<br>If you TC the player who gets the most points, you’ve done the best you can. It doesn’t matter what everyone else is doing!!!</p>&mdash; Az (@fplblackbox_az) <a href="https://twitter.com/fplblackbox_az/status/1341817006266470405?ref_src=twsrc%5Etfw">December 23, 2020</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>Yes, AZ is right, optimal decision is independent of EO, <strong>but we need to take a step back to understand why</strong>.</p><h2 id=the-role-ownership-plays-in-optimal-solution>The role &lsquo;ownership&rsquo; plays in optimal solution</h2><p>There are two schools of thought:</p><ul><li>The first group says that if you try to maximize your points, you will be doing the best you could regardless of what others are doing. Period.</li><li>The second group claims that the Effective Ownership makes it useless to own highly-owned players (unless you captain them), so EO does matter.</li></ul><p>As far as I can tell, the confusion comes from the missing part of the equation when we think of EO.
I made the same mistake in my earlier blog post, so I will talk a little bit more about EO here.</p><p>Suppose Salah will get 8 points next game and he is owned by 40% of all FPL managers including you.
To keep things simple, let me leave out the captaincy points.
You and 40% of all FPL managers will get 8 points. 60% will get 0 out of him.
The average benefit you get is the difference between your gain and your loss.
There is no loss to you in this case, but 40% of players will get the same benefit as you do, which will reduce your relative gain.
The average that Salah will bring to FPL managers is (overall average):</p><p>$$
8 \cdot \frac{40}{100} - 0 \cdot \frac{60}{100} = 3.2
$$</p><p>When you take your 8 points, the net gain (relative to all FPL managers) you get from Salah is 8-3.2=4.8. Awesome.
For people who don&rsquo;t own him, there is no gain but only loss, which is simply -3.2.</p><p>We can write down this idea in the following mathematical equation.</p><p>$$
\text{Average gain} - \text{Average loss} =
$$</p><p>$$
p_i \cdot (1-o_i) \cdot x_i - p_i \cdot o_i \cdot (1-x_i)
$$</p><p>Here, $x$ is a binary value, which takes value 1 if you own the player, and takes value 0 otherwise.
$p$ is the (expected) points for the player, and $o$ is the ownership ratio of the player.
In our earlier example, $p$ was 8, $o$ was 0.4, and for you $x$ was equal to 1.
Which gives us the same result:</p><ul><li>If you own: $8 \cdot (1-0.4) \cdot 1 - 8 \cdot 0.4 \cdot 0= 4.8$</li><li>If you don&rsquo;t: $8 \cdot (1-0.4) \cdot 0 - 8 \cdot 0.4 \cdot 1 = -3.2$</li></ul><p>The equation above reduces to
$$
p_i x_i - p_i o_i
$$</p><p>This is very intuitive: The first part $p_i \cdot x_i$ becomes 0 if you don&rsquo;t own the player, and it becomes $p_i$ if you do.
So, the first term is your absolute gain.
The second part is simply the average points of all FPL managers getting from this particular player.
The good news? The second part is constant: you cannot do anything about it, so you don&rsquo;t need to care at all!
If other managers own Fernandes heavily, the average will be the same regardless of what you do.
The only thing you can control here is the value $x$, whether you have the player or not.</p><p>This is why EO is not important.
It only changes your relative position to other FPL managers.</p><p><strong>Maximizing your relative difference to average of all FPL managers is the same thing as maximizing your own points!</strong></p><p>In the context of optimization, second term does not have any effect.
<strong>But</strong>, the question you are probably wondering if there is a catch. There is.
Enter multiobjective optimization.</p><h2 id=multiobjective-optimization-with-fpl>Multiobjective optimization with FPL</h2><p>When I defined average gain and loss, we had ownership rate appearing in both terms.
So, you might be suspecting that EO changes your gain and loss, which is totally correct.
Like all FPL managers we are trying to</p><ol><li>Maximize the gain</li><li>Minimize the loss</li></ol><p>These two may sound like parallel to each other, but they are actually <strong>conflicting objectives</strong>.
Mainly because you have limited budget and need to decide on one player or the other.
Let me explain it on an example below.</p><p>Suppose Mane and Fernandes both has the same expected points, 10, but Mane&rsquo;s ownership ratio is 5% and Fernandes&rsquo; is 90%.
The average gain you get from Mane (suppose they both get 10 points exactly) is $10 \cdot (1-0.05) = 9.5$.
However you will lose $10 \cdot 0.9 = 9$ by not owning Fernandes.
Similarly, the gain you get from Fernandes if you own him is $10 \cdot (1-0.9) = 1$, while the loss from not owning Mane is $10 \cdot 0.05 = 0.5$.</p><p>The math says that the net benefit you get by owning either of them is the same!</p><ul><li>Owning Mane: Gain - Loss = 9.5 - 9 = 0.5</li><li>Owning Fernandes: Gain - Loss = 1 - 0.5 = 0.5</li></ul><p>However, as you see there is a difference on how we reached 0.5.
The first path is high risk, high reward.</p><ul><li>If you have Mane, and Fernandes blanks (2 points): you will jump in rank massively: $9.5 - 2 \cdot 0.9 = 7.7$.</li><li>If you have Mane, and he blanks: you will lose quite a bit of rank: $2 \cdot (1-0.05) - 9 = -7.1$.</li><li>If you have Fernandes, and Mane blanks: your net benefit is $1 - 2 \cdot 0.05 = 0.9$.</li><li>If you have Fernandes, and he blanks: your net benefit is $2 \cdot (1-0.9) - 0.5 = -0.3$.</li></ul><p>See the payoff table below.</p><table><thead><tr><th>Scenario</th><th style=text-align:right>Own Mane</th><th style=text-align:right>Own Fernandes</th></tr></thead><tbody><tr><td>Both get 10</td><td style=text-align:right>0.5</td><td style=text-align:right>0.5</td></tr><tr><td>Fernandes blanks</td><td style=text-align:right>7.7</td><td style=text-align:right>-0.3</td></tr><tr><td>Mane blanks</td><td style=text-align:right>-7.1</td><td style=text-align:right>0.9</td></tr><tr><td>Both blanks</td><td style=text-align:right>0.1</td><td style=text-align:right>0.1</td></tr></tbody></table><p>It is easy to see why owning Mane could make or break things for you now.</p><p>The problem gets more complicated when you include all the players, not only 2.
There are number of ways to solve multiobjective optimization problems like this one, but I will use <em>weighted-sum</em> method.</p><p>On my <a href=https://sertalpbilal.github.io/fpl_optimized/team_summary.html target=_blank>FPL Optimized</a> page, I show the following expected gain / loss graph depending on the ownership rates:</p><figure class="ins-fig img-responsive"><img src=/img/uploads/fpl_optimized_graph1.png class="lazy img-responsive pull-center"></figure><ul><li><p>When you try to only &ldquo;maximize the gain&rdquo;, the optimization will pick the players higher on the x-axis.
This will mean that you prefer players with &ldquo;high expected points and low ownership&rdquo;.</p></li><li><p>When you &ldquo;minimize the loss&rdquo;, the optimization will pick the players higher on the y-axis.
This will mean that you prefer players with &ldquo;high expected points and high ownership&rdquo;.</p></li><li><p>When you &ldquo;maximize the net benefit&rdquo; or &ldquo;maximize expected points&rdquo;, the optimization will pick the players higher on the diagonal (50% own direction).
This will mean that you prefer players with &ldquo;high expected points, regardless of ownership ratio&rdquo;.</p></li></ul><p>But, we can aim for something in between instead of these three extremes.
Since we have two different objectives here, we can assign a weight on how much we think gain and loss are important.</p><p>$$
w \cdot \text{Expected Gain} - (1-w) \cdot \text{Expected Loss}
$$</p><figure class="ins-fig img-responsive"><img src=/img/uploads/fpl_optimized_graph2.png class="lazy img-responsive pull-center"></figure><p>Notice that when $w=1$, you are maximizing your gain; when $w=0$ you are minimizing the loss, and when $w=0.5$, you are maximizing your points.
Solving this problem using an optimization solver (algorithm) will give you what is called a &ldquo;<a href=https://en.wikipedia.org/wiki/Pareto_efficiency target=_blank>Pareto-optimal</a>&rdquo;.
It means that, for the specified weight $w$, you will get the best solution.
There could be other solutions that has the same value (weak Pareto optimality), but nothing can exceed this point on both objectives at the same time.</p><p>Yes, all FPL managers are trying to balance between their gains and losses, but there is an optimal selection of players for each selection of $w$ between 0 and 1.
In case you are wondering how much this weight affects the optimal solution, I solved the resulting optimization problem (under 100M budget) for 21 different values of $w$.
Here&rsquo;s how the gain, loss and benefit changes for GW16:</p><table><thead><tr><th>Gain Weight (w)</th><th style=text-align:right>Exp Gain</th><th style=text-align:right>Exp Loss</th><th style=text-align:right>Exp Benefit (Net)</th></tr></thead><tbody><tr><td>0</td><td style=text-align:right>28.850</td><td style=text-align:right>27.736</td><td style=text-align:right>1.114</td></tr><tr><td>0.05</td><td style=text-align:right>28.850</td><td style=text-align:right>27.736</td><td style=text-align:right>1.114</td></tr><tr><td>0.1</td><td style=text-align:right>30.576</td><td style=text-align:right>27.896</td><td style=text-align:right>2.680</td></tr><tr><td>0.15</td><td style=text-align:right>30.576</td><td style=text-align:right>27.896</td><td style=text-align:right>2.680</td></tr><tr><td>0.2</td><td style=text-align:right>33.740</td><td style=text-align:right>28.664</td><td style=text-align:right>5.076</td></tr><tr><td>0.25</td><td style=text-align:right>35.172</td><td style=text-align:right>29.138</td><td style=text-align:right>6.034</td></tr><tr><td>0.3</td><td style=text-align:right>35.172</td><td style=text-align:right>29.138</td><td style=text-align:right>6.034</td></tr><tr><td>0.35</td><td style=text-align:right>36.801</td><td style=text-align:right>29.951</td><td style=text-align:right>6.850</td></tr><tr><td>0.4</td><td style=text-align:right>36.801</td><td style=text-align:right>29.951</td><td style=text-align:right>6.850</td></tr><tr><td>0.45</td><td style=text-align:right>39.216</td><td style=text-align:right>31.686</td><td style=text-align:right>7.530</td></tr><tr><td>0.5</td><td style=text-align:right>40.885</td><td style=text-align:right>33.090</td><td style=text-align:right>7.795</td></tr><tr><td>0.55</td><td style=text-align:right>43.116</td><td style=text-align:right>35.548</td><td style=text-align:right>7.568</td></tr><tr><td>0.6</td><td style=text-align:right>43.116</td><td style=text-align:right>35.548</td><td style=text-align:right>7.568</td></tr><tr><td>0.65</td><td style=text-align:right>45.277</td><td style=text-align:right>39.203</td><td style=text-align:right>6.074</td></tr><tr><td>0.7</td><td style=text-align:right>46.487</td><td style=text-align:right>41.486</td><td style=text-align:right>5.001</td></tr><tr><td>0.75</td><td style=text-align:right>46.487</td><td style=text-align:right>41.486</td><td style=text-align:right>5.001</td></tr><tr><td>0.8</td><td style=text-align:right>47.376</td><td style=text-align:right>44.378</td><td style=text-align:right>2.998</td></tr><tr><td>0.85</td><td style=text-align:right>47.376</td><td style=text-align:right>44.378</td><td style=text-align:right>2.998</td></tr><tr><td>0.9</td><td style=text-align:right>47.376</td><td style=text-align:right>44.378</td><td style=text-align:right>2.998</td></tr><tr><td>0.95</td><td style=text-align:right>47.376</td><td style=text-align:right>44.378</td><td style=text-align:right>2.998</td></tr><tr><td>1</td><td style=text-align:right>47.376</td><td style=text-align:right>44.378</td><td style=text-align:right>2.998</td></tr></tbody></table><p>The following chart might help to understand what is going on.
You can hover (or touch) the circles below to see the actual lineup.</p><div id=plot1 style="max-width:700px;margin:0 auto"></div><script type=text/javascript>var gw16_data=[{gain_weight:0,loss_weight:1,gain:28.85,loss:27.736,net:1.114,lineup:"Martínez, Zouma, Justin, Walker-Peters, Johnson, Salah, Fernandes, Son, Calvert-Lewin, Bamford, Kane"},{gain_weight:.05,loss_weight:.95,gain:28.85,loss:27.736,net:1.114,lineup:"Martínez, Zouma, Justin, Walker-Peters, Johnson, Salah, Fernandes, Son, Calvert-Lewin, Bamford, Kane"},{gain_weight:.1,loss_weight:.9,gain:30.576,loss:27.896,net:2.68,lineup:"McCarthy, Pieters, Zouma, Justin, Walker-Peters, Salah, Fernandes, Son, Calvert-Lewin, Bamford, Kane"},{gain_weight:.15,loss_weight:.85,gain:30.576,loss:27.896,net:2.68,lineup:"McCarthy, Pieters, Zouma, Justin, Walker-Peters, Salah, Fernandes, Son, Calvert-Lewin, Bamford, Kane"},{gain_weight:.2,loss_weight:.8,gain:33.74,loss:28.664,net:5.076,lineup:"McCarthy, Taylor, Justin, Robertson, Walker-Peters, Salah, Fernandes, Ward-Prowse, Son, Bamford, Kane"},{gain_weight:.25,loss_weight:.75,gain:35.172,loss:29.138,net:6.034,lineup:"McCarthy, Pieters, Justin, Robertson, Dier, Salah, Fernandes, Ward-Prowse, Son, Bamford, Kane"},{gain_weight:.3,loss_weight:.7,gain:35.172,loss:29.138,net:6.034,lineup:"McCarthy, Pieters, Justin, Robertson, Dier, Salah, Fernandes, Ward-Prowse, Son, Bamford, Kane"},{gain_weight:.35,loss_weight:.65,gain:36.801,loss:29.951,net:6.85,lineup:"McCarthy, Taylor, Robertson, Dier, Harrison, Salah, Fernandes, Son, Bamford, Adams, Kane"},{gain_weight:.4,loss_weight:.6,gain:36.801,loss:29.951,net:6.85,lineup:"McCarthy, Taylor, Robertson, Dier, Harrison, Salah, Fernandes, Son, Bamford, Adams, Kane"},{gain_weight:.45,loss_weight:.55,gain:39.216,loss:31.686,net:7.53,lineup:"Pope, Robertson, Alexander-Arnold, Maguire, Dier, Salah, Ward-Prowse, Son, Bamford, Adams, Kane"},{gain_weight:.5,loss_weight:.5,gain:40.885,loss:33.09,net:7.795,lineup:"Pope, Robertson, Alexander-Arnold, Maguire, Alderweireld, Dier, Salah, Fernandes, Bamford, Adams, Kane"},{gain_weight:.55,loss_weight:.45,gain:43.116,loss:35.548,net:7.568,lineup:"Pope, Alexander-Arnold, Maguire, Alderweireld, Dier, Mané, Salah, Ward-Prowse, Bamford, Adams, Kane"},{gain_weight:.6,loss_weight:.4,gain:43.116,loss:35.548,net:7.568,lineup:"Pope, Alexander-Arnold, Maguire, Alderweireld, Dier, Mané, Salah, Ward-Prowse, Bamford, Adams, Kane"},{gain_weight:.65,loss_weight:.35,gain:45.277,loss:39.203,net:6.074,lineup:"Lloris, Pieters, Maguire, Alderweireld, Dier, Mané, Salah, Sterling, Bamford, Firmino, Adams"},{gain_weight:.7,loss_weight:.3,gain:46.487,loss:41.486,net:5.001,lineup:"Lloris, Maguire, Alderweireld, Dier, Harrison, Mané, Salah, Sterling, Raphinha, Firmino, Adams"},{gain_weight:.75,loss_weight:.25,gain:46.487,loss:41.486,net:5.001,lineup:"Lloris, Maguire, Alderweireld, Dier, Harrison, Mané, Salah, Sterling, Raphinha, Firmino, Adams"},{gain_weight:.8,loss_weight:.2,gain:47.376,loss:44.378,net:2.998,lineup:"Lloris, Alexander-Arnold, Maguire, Alderweireld, Dier, Pulisic, Harrison, Mané, Sterling, Firmino, Martial"},{gain_weight:.85,loss_weight:.15,gain:47.376,loss:44.378,net:2.998,lineup:"Lloris, Alexander-Arnold, Maguire, Alderweireld, Dier, Pulisic, Harrison, Mané, Sterling, Firmino, Martial"},{gain_weight:.9,loss_weight:.1,gain:47.376,loss:44.378,net:2.998,lineup:"Lloris, Alexander-Arnold, Maguire, Alderweireld, Dier, Pulisic, Harrison, Mané, Sterling, Firmino, Martial"},{gain_weight:.95,loss_weight:.05,gain:47.376,loss:44.378,net:2.998,lineup:"Lloris, Alexander-Arnold, Maguire, Alderweireld, Dier, Pulisic, Harrison, Mané, Sterling, Firmino, Martial"},{gain_weight:1,loss_weight:0,gain:47.376,loss:44.378,net:2.998,lineup:"Lloris, Alexander-Arnold, Maguire, Alderweireld, Dier, Pulisic, Harrison, Mané, Sterling, Firmino, Martial"}];function draw_plot(e,t){var o,i,l,d,u,h,m,f,s={top:20,right:30,bottom:40,left:45},c=450-s.left-s.right,a=350-s.top-s.bottom;let g=d3.select(e).append("svg").attr("viewBox",`0 0  ${c+s.left+s.right} ${a+s.top+s.bottom}`).attr("class","pull-center").style("display","block"),n=g.append("g").attr("transform","translate("+s.left+","+s.top+")");n.append("rect").attr("fill","#f1f1f1").attr("width",c).attr("height",a),o=d3.scaleBand().domain(t.map(e=>e.gain_weight)).range([0,c]).padding([.2]),n.append("g").attr("transform","translate(0,"+a+")").call(d3.axisBottom(o)),d=d3.scaleBand().domain(["gain","loss"]).range([0,o.bandwidth()]).padding([0]),i=d3.scaleLinear().domain([0,d3.max(t,e=>e.gain)+2]).range([a,0]),n.append("g").call(d3.axisLeft(i)),u=d3.scaleLinear().domain([0,d3.max(t,e=>e.net)+1]).range([a,0]),n.append("g").attr("transform","translate("+c+",0)").call(d3.axisRight(u)),n.call(e=>e.selectAll(".tick").attr("font-size","6pt")),n.append("text").attr("text-anchor","middle").attr("x",c/2).attr("y",a+30).attr("font-size","7pt").text("Gain weight (w)"),n.append("text").attr("text-anchor","middle").attr("x",-5).attr("y",-5).attr("font-size","7pt").text("Gain/Loss"),n.append("text").attr("text-anchor","middle").attr("x",c+5).attr("y",-5).attr("font-size","7pt").text("Net"),n.append("g").attr("fill","#146d5e").attr("fill-opacity",.8).selectAll("rect").data(t).join("rect").attr("transform",function(e){return"translate("+o(e.gain_weight)+",0)"}).attr("x",e=>d(e.gain_weight)).attr("width",d.bandwidth()).attr("y",e=>i(e.gain)).attr("height",e=>i(0)-i(e.gain)).attr("opacity",.7),n.append("g").attr("fill","#ff742c").attr("fill-opacity",.8).selectAll("rect").data(t).join("rect").attr("transform",function(e){return"translate("+o(e.gain_weight)+",0)"}).attr("x",e=>d.bandwidth()).attr("width",d.bandwidth()).attr("y",e=>i(e.loss)).attr("height",e=>i(0)-i(e.loss)).attr("opacity",.7);let v=d3.line().x(e=>o(e.gain_weight)+o.bandwidth()/2).y(e=>u(e.net));n.append("path").attr("id","graph").attr("fill","none").attr("stroke","black").attr("stroke-width",2).attr("d",v(t)).attr("opacity",.8),l=d3.select("body").append("div").style("opacity",0).attr("class","tooltip-p3").style("position","absolute").style("background-color","white").style("color","black").style("border","solid").style("border-color","black").style("border-width","1px").style("border-radius","5px").style("padding","5px").style("font-size","small"),m=function(){l.style("opacity",1),d3.select(this).style("fill","red")},f=function(){l.style("opacity",0),l.html(""),d3.select(this).style("fill","black"),l.style("left","0px").style("top","0px")},h=function(e){debugger;players=e.target.dataset.lineup.split(", "),l.html(`
                <div style="display:block; margin: 0 auto; text-align: center"><b>Lineup</b></div>
                <table id="lineup_table">
                </table>
            `).style("left",e.pageX+5+"px").style("top",e.pageY+5+"px");for(p of players)document.getElementById("lineup_table").insertRow().innerHTML=`<td>${p}</td>`;debugger},n.append("g").selectAll("dot").data(t).enter().append("circle").attr("cx",function(e){return o(e.gain_weight)+o.bandwidth()/2}).attr("cy",function(e){return u(e.net)}).attr("r",4).attr("fill","black").attr("data-lineup",function(e){return e.lineup}).attr("opacity",1).on("mouseover",m).on("mousemove",h).on("mouseleave",f);let r=n.append("g").attr("transform","translate(300,"+(a+s.top+7)+")");r.append("rect").attr("x",0).attr("y",-4).attr("height",6).attr("width",6).style("fill","#146d5e").attr("opacity",.7),r.append("text").attr("x",10).attr("y",0).text("Gain").style("font-size","6px").attr("alignment-baseline","middle"),r.append("rect").attr("x",34).attr("y",-4).attr("height",6).attr("width",6).style("fill","#ff742c").attr("opacity",.7),r.append("text").attr("x",44).attr("y",0).text("Loss").style("font-size","6px").attr("alignment-baseline","middle"),r.append("rect").attr("x",68).attr("y",-3).attr("height",3).attr("width",10).style("fill","black").attr("opacity",.8),r.append("text").attr("x",82).attr("y",0).text("Net").style("font-size","6px").attr("alignment-baseline","middle")}$(document).ready(function(){draw_plot("#plot1",gw16_data)})</script><p>For GW17, the graph looks quite similar.</p><div id=plot2 style="max-width:700px;margin:0 auto"></div><script type=text/javascript>gw17_data=[{gain_weight:0,loss_weight:1,gain:27.498555,loss:26.58007,obj:-26.58007,net:.918485,lineup:"Martínez, Zouma, Mitchell, Dallas, Justin, Salah, Fernandes, Son, Calvert-Lewin, Bamford, Kane"},{gain_weight:.05,loss_weight:.95,gain:29.556744,loss:26.638259,obj:-23.82850885,net:2.918485,lineup:"McCarthy, Mitchell, Justin, Johnson, Zaha, Salah, Fernandes, Son, Calvert-Lewin, Bamford, Kane"},{gain_weight:.1,loss_weight:.9,gain:30.439241,loss:26.700756,obj:-20.9867563,net:3.738485,lineup:"Martínez, Bellerín, Mitchell, Justin, Salah, Fernandes, Son, Neto, Calvert-Lewin, Bamford, Kane"},{gain_weight:.15,loss_weight:.85,gain:30.439241,loss:26.700756,obj:-18.12975645,net:3.738485,lineup:"Martínez, Bellerín, Mitchell, Justin, Salah, Fernandes, Son, Neto, Calvert-Lewin, Bamford, Kane"},{gain_weight:.2,loss_weight:.8,gain:30.439241,loss:26.700756,obj:-15.2727566,net:3.738485,lineup:"Martínez, Bellerín, Mitchell, Justin, Salah, Fernandes, Son, Neto, Calvert-Lewin, Bamford, Kane"},{gain_weight:.25,loss_weight:.75,gain:30.439241,loss:26.700756,obj:-12.41575675,net:3.738485,lineup:"Martínez, Bellerín, Mitchell, Justin, Salah, Fernandes, Son, Neto, Calvert-Lewin, Bamford, Kane"},{gain_weight:.3,loss_weight:.7,gain:30.439241,loss:26.700756,obj:-9.5587569,net:3.738485,lineup:"Martínez, Bellerín, Mitchell, Justin, Salah, Fernandes, Son, Neto, Calvert-Lewin, Bamford, Kane"},{gain_weight:.35,loss_weight:.65,gain:32.028863,loss:27.390378,obj:-6.59364365,net:4.638485,lineup:"Sánchez, Pieters, Mitchell, Justin, Zaha, Salah, Fernandes, Son, Calvert-Lewin, Bamford, Kane"},{gain_weight:.4,loss_weight:.6,gain:35.325744,loss:29.377259,obj:-3.4960578,net:5.948485,lineup:"Leno, Mitchell, Justin, Robertson, Saka, Zaha, Salah, Son, Bamford, Vardy, Kane"},{gain_weight:.45,loss_weight:.55,gain:35.325744,loss:29.377259,obj:-.26090765,net:5.948485,lineup:"Leno, Mitchell, Justin, Robertson, Saka, Zaha, Salah, Son, Bamford, Vardy, Kane"},{gain_weight:.5,loss_weight:.5,gain:37.917439,loss:31.686954,obj:3.1152425,net:6.230485,lineup:"Leno, Holding, Tierney, van Aanholt, Mitchell, Salah, Rashford, Son, Bamford, Vardy, Kane"},{gain_weight:.55,loss_weight:.45,gain:39.044981,loss:32.989496,obj:6.62946635,net:6.055485,lineup:"Leno, Holding, van Aanholt, Mitchell, Zaha, Salah, Rashford, Son, Lookman, Vardy, Kane"},{gain_weight:.6,loss_weight:.4,gain:39.985339,loss:34.303854,obj:10.2696618,net:5.681485,lineup:"Guaita, Holding, Tierney, van Aanholt, Evans, Saka, Salah, Rashford, Son, Vardy, Kane"},{gain_weight:.65,loss_weight:.35,gain:43.170086,loss:39.637601,obj:14.18739555,net:3.532485,lineup:"Guaita, Holding, Tierney, van Aanholt, Aubameyang, Zaha, Rashford, Lookman, Vardy, Firmino, Kane"},{gain_weight:.7,loss_weight:.3,gain:43.170086,loss:39.637601,obj:18.3277799,net:3.532485,lineup:"Guaita, Holding, Tierney, van Aanholt, Aubameyang, Zaha, Rashford, Lookman, Vardy, Firmino, Kane"},{gain_weight:.75,loss_weight:.25,gain:43.170086,loss:39.637601,obj:22.46816425,net:3.532485,lineup:"Guaita, Holding, Tierney, van Aanholt, Aubameyang, Zaha, Rashford, Lookman, Vardy, Firmino, Kane"},{gain_weight:.8,loss_weight:.2,gain:43.431854,loss:40.582369,obj:26.6290094,net:2.849485,lineup:"Guaita, Holding, Tierney, van Aanholt, Evans, Aubameyang, Sigurdsson, Rashford, Vardy, Firmino, Kane"},{gain_weight:.85,loss_weight:.15,gain:43.864406,loss:42.964921,obj:30.84000695,net:.899485,lineup:"Guaita, Holding, Tierney, van Aanholt, Aubameyang, Sigurdsson, Mané, Rashford, Lookman, Vardy, Firmino"},{gain_weight:.9,loss_weight:.1,gain:43.864406,loss:42.964921,obj:35.1814733,net:.899485,lineup:"Guaita, Holding, Tierney, van Aanholt, Aubameyang, Sigurdsson, Mané, Rashford, Lookman, Vardy, Firmino"},{gain_weight:.95,loss_weight:.05,gain:43.864406,loss:42.964921,obj:39.52293965,net:.899485,lineup:"Guaita, Holding, Tierney, van Aanholt, Aubameyang, Sigurdsson, Mané, Rashford, Lookman, Vardy, Firmino"},{gain_weight:1,loss_weight:0,gain:43.864406,loss:42.964921,obj:43.864406,net:.899485,lineup:"Guaita, Holding, Tierney, van Aanholt, Aubameyang, Sigurdsson, Mané, Rashford, Lookman, Vardy, Firmino"}],$(document).ready(function(){draw_plot("#plot2",gw17_data)})</script><h2 id=how-to-use-this-information>How to use this information?</h2><p>That&rsquo;s the million dollar question!
As far as I can see, <strong>&ldquo;Elite Managers&rdquo; tends to minimize their losses</strong>.
I assume if they need to select a $w$ value, it could be between 0.35 and 0.55, depending on how risk-averse they are.
I was inspecting FPL Salah&rsquo;s decisions for the last few weeks, and they are mostly on the conservative side.
Check the expected and realized values for FPL Salah and Optimized FC (my team) for GW16:</p><p><figure class="ins-fig img-responsive"><img src=/img/uploads/fpl_optimized_salah_gw16.png class="lazy img-responsive pull-center"></figure><figure class="ins-fig img-responsive"><img src=/img/uploads/fpl_optimized_sertalp_gw16.png class="lazy img-responsive pull-center"></figure></p><p>The expected net change is usually around these numbers, but FPL Salah&rsquo;s expected gain and loss values are significantly lower.
It indicates that my opponent goes for highly owned players more than I do.</p><p>Since it&rsquo;s my first season in FPL, I&rsquo;m not 100% sure what brings success in long-term, but I&rsquo;m sure stable performance is quite important.
Sudden jumps is not sustainable for obvious reasons.
Another issue is that we only know the ownership rates for the current GW, so planning a few weeks in advance is tricky.</p><p>That&rsquo;s why my optimization model focuses on total points for the planning horizon (8 gameweeks based on <a href=https://fplreview.com target=_blank>FPL Review data</a>).
I also keep an eye on ownership rates to see how much risk I&rsquo;m taking.
Since I&rsquo;m committed to apply optimization model solutions as is, I expect a high Massive-Data (MD) value when using FPL Review&rsquo;s &ldquo;Season Review&rdquo; tool.
I suspect all the people who have high MD-points are using some sort of optimization in their decision making.</p><p>I created a page listing FPL managers who use analytics (and optimization) and sorted them by their MD points, rather than FPL points.</p><p><a href=https://sertalpbilal.github.io/fpl_optimized/fpl_analytics_league.html target=_blank>FPL Analytics xP League</a></p><p>And if you are wondering how things look for your team for the upcoming (or past) gameweeks, visit FPL Optimized to see your expected gain and loss.</p><p><a href=https://sertalpbilal.github.io/fpl_optimized/team_summary.html target=_blank>GW Summary</a></p><h2 id=conclusion>Conclusion</h2><p>EO is a controversial issue and it will probably stay that way, but I think we demistified the role of EO in decision making.
It&rsquo;s not something FPL managers should be actively chasing, but an important component to adjust your expectations.</p><p>FPL is a multi-dimensional problem to solve, which I enjoy attacking using optimization models.
Soon, I will share more on how a basic optimization formulation looks like for FPL.
Meanwhile, you can see the <a href=https://github.com/sertalpbilal/fpl_optimized/blob/engine/src/working_problems.py target=_blank>source code on this Pareto-Analysis on my GitHub repository</a> I keep for FPL Optimized.</p></div></div><div class=col-md-3><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Search</h3></div><div class=panel-body><form action=//google.com/search method=get accept-charset=UTF-8 role=search><div class=input-group><input type=search name=q class=form-control placeholder=Search>
<input type=hidden name=sitesearch value=https://alpscode.com/>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Categories</h3></div><div class=panel-body><ul class="nav nav-pills nav-stacked"><li><a href=/categories/analytics>analytics (3)</a></li><li><a href=/categories/optimization>optimization (6)</a></li><li><a href=/categories/programming>programming (2)</a></li><li><a href=/categories/quick-tip>quick-tip (3)</a></li></ul></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tags</h3></div><div class=panel-body><ul class=tag-cloud><li><a href=/tags/analytics><i class="fas fa-tags"></i> analytics</a></li><li><a href=/tags/api><i class="fas fa-tags"></i> api</a></li><li><a href=/tags/fantasy-premier-league><i class="fas fa-tags"></i> fantasy premier league</a></li><li><a href=/tags/fantasy-sports><i class="fas fa-tags"></i> fantasy sports</a></li><li><a href=/tags/fpl><i class="fas fa-tags"></i> fpl</a></li><li><a href=/tags/how-to><i class="fas fa-tags"></i> how-to</a></li><li><a href=/tags/latex><i class="fas fa-tags"></i> latex</a></li><li><a href=/tags/linux><i class="fas fa-tags"></i> linux</a></li><li><a href=/tags/machine-learning><i class="fas fa-tags"></i> machine learning</a></li><li><a href=/tags/math><i class="fas fa-tags"></i> math</a></li><li><a href=/tags/mathematics><i class="fas fa-tags"></i> mathematics</a></li><li><a href=/tags/optimization><i class="fas fa-tags"></i> optimization</a></li><li><a href=/tags/parsing><i class="fas fa-tags"></i> parsing</a></li><li><a href=/tags/predictive-modeling><i class="fas fa-tags"></i> predictive modeling</a></li><li><a href=/tags/python><i class="fas fa-tags"></i> python</a></li><li><a href=/tags/reddit><i class="fas fa-tags"></i> reddit</a></li><li><a href=/tags/rocket-league><i class="fas fa-tags"></i> rocket league</a></li><li><a href=/tags/script><i class="fas fa-tags"></i> script</a></li><li><a href=/tags/security><i class="fas fa-tags"></i> security</a></li><li><a href=/tags/soccer><i class="fas fa-tags"></i> soccer</a></li><li><a href=/tags/sports><i class="fas fa-tags"></i> sports</a></li><li><a href=/tags/web><i class="fas fa-tags"></i> web</a></li></ul></div></div></div></div></div></div><footer id=footer><div class=container><div class="col-md-4 col-sm-6"><h4>About</h4>AlpsCode is a technical blog about programming languages, tips, examples, and tech trends. Follow me at <a href=https://twitter.com/alpscode>Twitter</a> and <a href=https://github.com/alpscode>Github</a>.<hr class="hidden-md hidden-lg hidden-sm"></div><div class="col-md-4 col-sm-6"></div><div class="col-md-4 col-sm-6"><h4>Contact</h4><p>alpscode [at] gmail</p><p><a href=https://github.com/alpscode><i class='fa fa-2x fa-github'></i></a>
<a href=https://twitter.com/alpscode><i class='fa fa-2x fa-twitter'></i></a>
<a href=https://stackoverflow.com/users/10735543/alp-c><i class='fa fa-2x fa-stack-overflow'></i></a><hr class="hidden-md hidden-lg hidden-sm"></div></div></footer><div id=copyright><div class=container><div class=col-md-12><p class=pull-left><a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png></a>&nbsp; &nbsp;This blog is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p><p class=pull-right>Template by <a href=http://bootstrapious.com/free-templates>Bootstrapious</a>.
Ported to Hugo by <a href=https://github.com/devcows/hugo-universal-theme>DevCows</a></p></div></div></div></div><script src=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js></script><script src=https://alpscode.com/js/gmaps.init.js></script><script src=https://alpscode.com/js/front.js></script><script src=https://alpscode.com/js/owl.carousel.min.js></script><script>var myLazyLoad=new LazyLoad({elements_selector:".lazy"})</script><script src=https://d3js.org/d3.v6.min.js></script></body></html>